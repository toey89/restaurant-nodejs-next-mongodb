{"ast":null,"code":"import _extends from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\next-react-hooks-strapi-food-delivery\\\\frontend\\\\pages\\\\_app.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/* _app.js */\nimport React from \"react\";\nimport App from \"next/app\";\nimport Head from \"next/head\";\nimport Cookie from \"js-cookie\";\nimport fetch from \"isomorphic-fetch\";\nimport Layout from \"../components/Layout\";\nimport AppContext from \"../context/AppContext\";\nimport withData from \"../lib/apollo\";\n\nvar MyApp = /*#__PURE__*/function (_App) {\n  _inherits(MyApp, _App);\n\n  var _super = _createSuper(MyApp);\n\n  function MyApp() {\n    var _this;\n\n    _classCallCheck(this, MyApp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      user: null,\n      cart: {\n        items: [],\n        total: 0\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setUser\", function (user) {\n      _this.setState({\n        user: user\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addItem\", function (item) {\n      var items = _this.state.cart.items; //check for item already in cart\n      //if not in cart, add item if item is found increase quanity ++\n\n      var newItem = items.find(function (i) {\n        return i.id === item.id;\n      }); // if item is not new, add to cart, set quantity to 1\n\n      if (!newItem) {\n        //set quantity property to 1\n        item.quantity = 1;\n        console.log(_this.state.cart.total, item.price);\n\n        _this.setState({\n          cart: {\n            items: [].concat(_toConsumableArray(items), [item]),\n            total: _this.state.cart.total + item.price\n          }\n        }, function () {\n          return Cookie.set(\"cart\", _this.state.cart.items);\n        });\n      } else {\n        _this.setState({\n          cart: {\n            items: _this.state.cart.items.map(function (item) {\n              return item.id === newItem.id ? Object.assign({}, item, {\n                quantity: item.quantity + 1\n              }) : item;\n            }),\n            total: _this.state.cart.total + item.price\n          }\n        }, function () {\n          return Cookie.set(\"cart\", _this.state.cart.items);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeItem\", function (item) {\n      var items = _this.state.cart.items; //check for item already in cart\n      //if not in cart, add item if item is found increase quanity ++\n\n      var newItem = items.find(function (i) {\n        return i.id === item.id;\n      });\n\n      if (newItem.quantity > 1) {\n        _this.setState({\n          cart: {\n            items: _this.state.cart.items.map(function (item) {\n              return item.id === newItem.id ? Object.assign({}, item, {\n                quantity: item.quantity - 1\n              }) : item;\n            }),\n            total: _this.state.cart.total - item.price\n          }\n        }, function () {\n          return Cookie.set(\"cart\", _this.state.items);\n        });\n      } else {\n        var _items = _toConsumableArray(_this.state.cart.items);\n\n        var index = _items.findIndex(function (i) {\n          return i.id === newItem.id;\n        });\n\n        _items.splice(index, 1);\n\n        _this.setState({\n          cart: {\n            items: _items,\n            total: _this.state.cart.total - item.price\n          }\n        }, function () {\n          return Cookie.set(\"cart\", _this.state.items);\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(MyApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = Cookie.get(\"token\"); // restore cart from cookie, this could also be tracked in a db\n\n      var cart = Cookie.get(\"cart\"); //if items in cart, set items and total from cookie\n\n      console.log(cart);\n\n      if (typeof cart === \"string\" && cart !== \"undefined\") {\n        console.log(\"foyd\");\n        JSON.parse(cart).forEach(function (item) {\n          _this2.setState({\n            cart: {\n              items: JSON.parse(cart),\n              total: item.price * item.quantity\n            }\n          });\n        });\n      }\n\n      if (token) {\n        // authenticate the token on the server and place set user object\n        fetch(\"http://localhost:1337/users/me\", {\n          headers: {\n            Authorization: \"Bearer \".concat(token)\n          }\n        }).then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n            var user;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    if (res.ok) {\n                      _context.next = 4;\n                      break;\n                    }\n\n                    Cookie.remove(\"token\");\n\n                    _this2.setState({\n                      user: null\n                    });\n\n                    return _context.abrupt(\"return\", null);\n\n                  case 4:\n                    _context.next = 6;\n                    return res.json();\n\n                  case 6:\n                    user = _context.sent;\n\n                    _this2.setUser(user);\n\n                  case 8:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Component = _this$props.Component,\n          pageProps = _this$props.pageProps;\n      return __jsx(AppContext.Provider, {\n        value: {\n          user: this.state.user,\n          isAuthenticated: !!this.state.user,\n          setUser: this.setUser,\n          cart: this.state.cart,\n          addItem: this.addItem,\n          removeItem: this.removeItem\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 7\n        }\n      }, __jsx(Head, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 9\n        }\n      }, __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\",\n        integrity: \"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\",\n        crossOrigin: \"anonymous\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }\n      })), __jsx(Layout, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }\n      }, __jsx(Component, _extends({}, pageProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }\n      }))));\n    }\n  }]);\n\n  return MyApp;\n}(App);\n\nexport default _c = withData(MyApp);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/pages/_app.js"],"names":["React","App","Head","Cookie","fetch","Layout","AppContext","withData","MyApp","user","cart","items","total","setState","item","state","newItem","find","i","id","quantity","console","log","price","set","map","Object","assign","index","findIndex","splice","token","get","JSON","parse","forEach","headers","Authorization","then","res","ok","remove","json","setUser","props","Component","pageProps","isAuthenticated","addItem","removeItem"],"mappings":"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","sourcesContent":["/* _app.js */\r\nimport React from \"react\";\r\nimport App from \"next/app\";\r\nimport Head from \"next/head\";\r\nimport Cookie from \"js-cookie\";\r\nimport fetch from \"isomorphic-fetch\";\r\nimport Layout from \"../components/Layout\";\r\nimport AppContext from \"../context/AppContext\";\r\nimport withData from \"../lib/apollo\";\r\n\r\nclass MyApp extends App {\r\n  state = {\r\n    user: null,\r\n    cart: { items: [], total: 0 },\r\n  };\r\n\r\n  componentDidMount() {\r\n    const token = Cookie.get(\"token\");\r\n    // restore cart from cookie, this could also be tracked in a db\r\n    const cart = Cookie.get(\"cart\");\r\n    //if items in cart, set items and total from cookie\r\n    console.log(cart);\r\n\r\n    if (typeof cart === \"string\" && cart !== \"undefined\") {\r\n      console.log(\"foyd\");\r\n      JSON.parse(cart).forEach((item) => {\r\n        this.setState({\r\n          cart: { items: JSON.parse(cart), total: item.price * item.quantity },\r\n        });\r\n      });\r\n    }\r\n    if (token) {\r\n      // authenticate the token on the server and place set user object\r\n      fetch(\"http://localhost:1337/users/me\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }).then(async (res) => {\r\n        // if res comes back not valid, token is not valid\r\n        // delete the token and log the user out on client\r\n        if (!res.ok) {\r\n          Cookie.remove(\"token\");\r\n          this.setState({ user: null });\r\n          return null;\r\n        }\r\n        const user = await res.json();\r\n        this.setUser(user);\r\n      });\r\n    }\r\n  }\r\n\r\n  setUser = (user) => {\r\n    this.setState({ user });\r\n  };\r\n\r\n  addItem = (item) => {\r\n    let { items } = this.state.cart;\r\n    //check for item already in cart\r\n    //if not in cart, add item if item is found increase quanity ++\r\n    const newItem = items.find((i) => i.id === item.id);\r\n    // if item is not new, add to cart, set quantity to 1\r\n    if (!newItem) {\r\n      //set quantity property to 1\r\n      item.quantity = 1;\r\n      console.log(this.state.cart.total, item.price);\r\n      this.setState(\r\n        {\r\n          cart: {\r\n            items: [...items, item],\r\n            total: this.state.cart.total + item.price,\r\n          },\r\n        },\r\n        () => Cookie.set(\"cart\", this.state.cart.items)\r\n      );\r\n    } else {\r\n      this.setState(\r\n        {\r\n          cart: {\r\n            items: this.state.cart.items.map((item) =>\r\n              item.id === newItem.id\r\n                ? Object.assign({}, item, { quantity: item.quantity + 1 })\r\n                : item\r\n            ),\r\n            total: this.state.cart.total + item.price,\r\n          },\r\n        },\r\n        () => Cookie.set(\"cart\", this.state.cart.items)\r\n      );\r\n    }\r\n  };\r\n  removeItem = (item) => {\r\n    let { items } = this.state.cart;\r\n    //check for item already in cart\r\n    //if not in cart, add item if item is found increase quanity ++\r\n    const newItem = items.find((i) => i.id === item.id);\r\n    if (newItem.quantity > 1) {\r\n      this.setState(\r\n        {\r\n          cart: {\r\n            items: this.state.cart.items.map((item) =>\r\n              item.id === newItem.id\r\n                ? Object.assign({}, item, { quantity: item.quantity - 1 })\r\n                : item\r\n            ),\r\n            total: this.state.cart.total - item.price,\r\n          },\r\n        },\r\n        () => Cookie.set(\"cart\", this.state.items)\r\n      );\r\n    } else {\r\n      const items = [...this.state.cart.items];\r\n      const index = items.findIndex((i) => i.id === newItem.id);\r\n\r\n      items.splice(index, 1);\r\n      this.setState(\r\n        { cart: { items: items, total: this.state.cart.total - item.price } },\r\n        () => Cookie.set(\"cart\", this.state.items)\r\n      );\r\n    }\r\n  };\r\n  render() {\r\n    const { Component, pageProps } = this.props;\r\n\r\n    return (\r\n      <AppContext.Provider\r\n        value={{\r\n          user: this.state.user,\r\n          isAuthenticated: !!this.state.user,\r\n          setUser: this.setUser,\r\n          cart: this.state.cart,\r\n          addItem: this.addItem,\r\n          removeItem: this.removeItem,\r\n        }}\r\n      >\r\n        <Head>\r\n          <link\r\n            rel=\"stylesheet\"\r\n            href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\r\n            integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\"\r\n            crossOrigin=\"anonymous\"\r\n          />\r\n        </Head>\r\n\r\n        <Layout>\r\n          <Component {...pageProps} />\r\n        </Layout>\r\n      </AppContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withData(MyApp);"]},"metadata":{},"sourceType":"module"}