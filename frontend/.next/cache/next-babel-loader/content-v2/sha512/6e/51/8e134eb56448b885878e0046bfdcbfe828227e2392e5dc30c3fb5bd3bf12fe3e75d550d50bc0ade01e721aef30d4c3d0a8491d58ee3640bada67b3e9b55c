{"ast":null,"code":"import _regeneratorRuntime from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/xampp/htdocs/next-react-hooks-strapi-food-delivery/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* /components/Checkout/CheckoutForm.js */\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { FormGroup, Label, Input } from \"reactstrap\";\nimport fetch from \"isomorphic-fetch\"; //import Cookies from \"js-cookie\";\n//import { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\n//import CardSection from \"./CardSection\";\n\nimport AppContext from \"../../context/AppContext\"; //import Ckeditor from \"../ckeditor/Ckeditor\";\n//import Compotest from \"../ckeditor/Compotest\";\n\nimport dynamic from 'next/dynamic';\nimport $ from \"jquery\";\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nimport Router from \"next/router\";\nvar Ckeditor = dynamic(function () {\n  return import('../ckeditor/Ckeditor');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../ckeditor/Ckeditor')];\n    },\n    modules: ['../ckeditor/Ckeditor']\n  }\n});\nvar MySwal = withReactContent(Swal);\n\nfunction AddResForm() {\n  var _useState = useState({\n    nameshop: \"\",\n    description: \"\"\n  }),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      error = _useState2[0],\n      setError = _useState2[1]; //const stripe = useStripe();\n  //const elements = useElements();\n\n\n  var appContext = useContext(AppContext);\n\n  var _useState3 = useState(),\n      selectedFile = _useState3[0],\n      setSelectedFile = _useState3[1];\n\n  var _useState4 = useState(),\n      preview = _useState4[0],\n      setPreview = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      setLoading = _useState5[1]; // create a preview as a side effect, whenever selected file is changed\n\n\n  useEffect(function () {\n    if (!selectedFile) {\n      setPreview(undefined);\n      return;\n    }\n\n    var objectUrl = URL.createObjectURL(selectedFile);\n    setPreview(objectUrl); // free memory when ever this component is unmounted\n\n    return function () {\n      return URL.revokeObjectURL(objectUrl);\n    };\n  }, [selectedFile]);\n  useEffect(function () {\n    $(\".nameshop\").change(function () {\n      alert(\"test\");\n    });\n  }, []);\n\n  function onChange(e) {\n    //alert(data.description)\n    // set the key = to the name property equal to the value typed\n    var updateItem = data[e.target.name] = e.target.value; // update the state data object\n\n    setData(_objectSpread(_objectSpread({}, data), {}, {\n      updateItem: updateItem\n    }));\n    /*MySwal.fire({\r\n      title: <p>Hello World</p>,\r\n      footer: 'Copyright 2018',\r\n      didOpen: () => {\r\n        // `MySwal` is a subclass of `Swal`\r\n        //   with all the same instance & static methods\r\n        MySwal.clickConfirm()\r\n      }\r\n    })\r\n    .then(() => {\r\n      return MySwal.fire(<p>Shorthand works too</p>)\r\n    })*/\n  } //document.querySelector(\"#validatedCustomFile\").onchange = function(){\n\n\n  function onChangeF(e) {\n    document.querySelector(\"#file-name\").textContent = e.target.files[0].name;\n\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } // I've kept this example simple by using the first image instead of multiple\n\n\n    setSelectedFile(e.target.files[0]);\n  } //}\n\n\n  function submitAddRestaurant(_x) {\n    return _submitAddRestaurant.apply(this, arguments);\n  }\n\n  function _submitAddRestaurant() {\n    _submitAddRestaurant = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var fileInput, formData, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              //alert(data.description);\n              event.preventDefault(); // // Use elements.getElement to get a reference to the mounted Element.\n              //const cardElement = elements.getElement(CardElement);\n              // // Pass the Element directly to other Stripe.js methods:\n              // // e.g. createToken - https://stripe.com/docs/js/tokens_sources/create_token?type=cardElement\n              // get token back from stripe to process credit card\n              //const token = await stripe.createToken(cardElement);\n              //const userToken = Cookies.get(\"token\");\n\n              if (!(data.nameshop == \"\")) {\n                _context.next = 5;\n                break;\n              }\n\n              MySwal.fire({\n                icon: 'error',\n                //title: 'Oops...',\n                text: 'กรุณากรอกชื่อร้าน',\n                onAfterClose: function onAfterClose() {\n                  setTimeout(function () {\n                    return document.querySelector(\"input[name='nameshop']\").focus();\n                  }, 110);\n                } //footer: '<a href>Why do I have this issue?</a>'\n\n              });\n              _context.next = 19;\n              break;\n\n            case 5:\n              if (!(data.description == \"\")) {\n                _context.next = 9;\n                break;\n              }\n\n              MySwal.fire({\n                icon: 'error',\n                //title: 'Oops...',\n                text: 'กรุณากรอกรายละเอียดร้าน' //footer: '<a href>Why do I have this issue?</a>'\n\n              });\n              _context.next = 19;\n              break;\n\n            case 9:\n              setLoading(true);\n              event.target.disabled = true;\n              fileInput = document.querySelector(\"input[name='image']\");\n              formData = new FormData();\n              formData.append('data', JSON.stringify({\n                name: data.nameshop,\n                description: data.description\n              }));\n\n              if (fileInput.files[0]) {\n                formData.append(\"files.image\", fileInput.files[0], fileInput.files[0].name);\n              }\n\n              _context.next = 17;\n              return fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/restaurants\"), {\n                method: \"POST\",\n                //headers: userToken && { Authorization: `Bearer ${userToken}` },\n                //headers: {'Content-Type': 'application/json'},\n                //headers: {'Content-Type': 'multipart/form-data'},\n                //headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n\n                /*body: JSON.stringify({\r\n                  name: data.nameshop,\r\n                  description: data.description,\r\n                  amount: Number(Math.round(appContext.cart.total + \"e2\") + \"e-2\"),\r\n                  dishes: appContext.cart.items,\r\n                  address: data.address,\r\n                  city: data.city,\r\n                  state: data.state,\r\n                  token: token.token.id,\r\n                }),*/\n                body: formData\n              });\n\n            case 17:\n              response = _context.sent;\n\n              if (!response.ok) {\n                setError(response.statusText);\n              } else {\n                MySwal.fire({\n                  icon: 'success',\n                  text: 'เพิ่มข้อมูลร้านเรียบร้อย',\n                  allowOutsideClick: false\n                }).then(function () {\n                  Router.push(\"/\");\n                });\n              }\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _submitAddRestaurant.apply(this, arguments);\n  }\n\n  return __jsx(\"div\", {\n    className: \"jsx-3522890538\" + \" \" + \"paper\"\n  }, __jsx(\"h5\", {\n    className: \"jsx-3522890538\"\n  }, \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E23\\u0E49\\u0E32\\u0E19 :\"), __jsx(\"hr\", {\n    className: \"jsx-3522890538\"\n  }), __jsx(FormGroup, {\n    style: {\n      display: \"flex\"\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flex: \"0.90\",\n      marginRight: 10\n    },\n    className: \"jsx-3522890538\"\n  }, __jsx(Label, null, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E49\\u0E32\\u0E19\"), __jsx(Input, {\n    style: {\n      width: 200\n    },\n    name: \"nameshop\",\n    onChange: onChange\n  }))), __jsx(FormGroup, {\n    style: {\n      display: \"flex\"\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flex: \"0.65\",\n      marginRight: \"6%\"\n    },\n    className: \"jsx-3522890538\"\n  }, __jsx(Label, null, \"\\u0E20\\u0E32\\u0E1E\"), __jsx(\"div\", {\n    \"class\": \"custom-file\",\n    className: \"jsx-3522890538\"\n  }, __jsx(Input, {\n    type: \"file\",\n    name: \"image\",\n    onChange: onChangeF,\n    \"class\": \"custom-file-input\",\n    id: \"validatedCustomFile\",\n    required: true\n  }), __jsx(\"label\", {\n    id: \"file-name\",\n    \"class\": \"custom-file-label\",\n    \"for\": \"validatedCustomFile\",\n    className: \"jsx-3522890538\"\n  }, \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E...\"), __jsx(\"div\", {\n    \"class\": \"invalid-feedback\",\n    className: \"jsx-3522890538\"\n  }, \"Example invalid custom file feedback\")), __jsx(\"div\", {\n    style: {\n      marginTop: 5\n    },\n    className: \"jsx-3522890538\"\n  }, selectedFile && __jsx(\"img\", {\n    style: {\n      width: \"100%\"\n    },\n    src: preview,\n    className: \"jsx-3522890538\"\n  })))), __jsx(FormGroup, {\n    style: {\n      display: \"flex\"\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flex: \"0.65\",\n      marginRight: \"6%\"\n    },\n    className: \"jsx-3522890538\"\n  }, __jsx(Label, null, \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"), __jsx(\"div\", {\n    className: \"jsx-3522890538\" + \" \" + \"ck ck-toolbar-dropdown ck-toolbar ck-toolbar__items\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3522890538\" + \" \" + \"ck-editor__editable\"\n  }, __jsx(Ckeditor, {\n    onChange: function onChange(v) {\n      data['description'] = v;\n    }\n  }))), __jsx(Ckeditor, {\n    data: \"\",\n    value: \"test\",\n    onChange: function onChange(v) {\n      data['description'] = v;\n    }\n  }))), __jsx(\"div\", {\n    className: \"jsx-3522890538\" + \" \" + \"order-button-wrapper\"\n  }, __jsx(\"button\", {\n    onClick: submitAddRestaurant,\n    className: \"jsx-3522890538\"\n  }, loading ? \"Loading... \" : \"เพิ่มร้านค้า\")), __jsx(_JSXStyle, {\n    id: \"3522890538\"\n  }, [\"@media (max-width:425px){.ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;min-width:70vw;}}\", \".ck-editor__editable{min-height:400px;}\", \".paper{border:1px solid lightgray;box-shadow:0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12);height:auto;padding:30px;background:#fff;border-radius:6px;margin-top:10px;margin-bottom:10px;}\", \".form-half{-webkit-flex:0.5;-ms-flex:0.5;flex:0.5;}\", \"*{box-sizing:border-box;}\", \"body,html{background-color:#f6f9fc;font-size:18px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;}\", \"h1{color:#32325d;font-weight:400;line-height:50px;font-size:40px;margin:20px 0;padding:0;}\", \".Checkout{margin:0 auto;max-width:800px;box-sizing:border-box;padding:0 5px;}\", \"label{color:#6b7c93;font-weight:300;-webkit-letter-spacing:0.025em;-moz-letter-spacing:0.025em;-ms-letter-spacing:0.025em;letter-spacing:0.025em;}\", \"button{white-space:nowrap;border:0;outline:0;display:inline-block;height:40px;line-height:40px;padding:0 14px;box-shadow:0 4px 6px rgba(50,50,93,0.11), 0 1px 3px rgba(0,0,0,0.08);color:#fff;border-radius:4px;font-size:15px;font-weight:600;text-transform:uppercase;-webkit-letter-spacing:0.025em;-moz-letter-spacing:0.025em;-ms-letter-spacing:0.025em;letter-spacing:0.025em;background-color:#6772e5;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all 150ms ease;-webkit-transition:all 150ms ease;transition:all 150ms ease;margin-top:10px;}\", \"form{margin-bottom:40px;padding-bottom:40px;border-bottom:3px solid #e6ebf1;}\", \"button:hover{color:#fff;cursor:pointer;background-color:#7795f8;-webkit-transform:translateY(-1px);-ms-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 7px 14px rgba(50,50,93,0.1), 0 3px 6px rgba(0,0,0,0.08);}\", \"textarea{display:block;background-color:#f8f9fa !important;margin:10px 0 20px 0;max-width:500px;padding:10px 14px;font-size:1em;font-family:\\\"Source Code Pro\\\",monospace;box-shadow:rgba(50,50,93,0.14902) 0px 1px 3px, rgba(0,0,0,0.0196078) 0px 1px 0px;border:0;outline:0;border-radius:4px;background:white;width:440px;resize:vertical;overflow:auto;height:120px;}\", \"input,.StripeElement{display:block;background-color:#f8f9fa !important;margin:10px 0 20px 0;max-width:500px;padding:10px 14px;font-size:1em;font-family:\\\"Source Code Pro\\\",monospace;box-shadow:rgba(50,50,93,0.14902) 0px 1px 3px, rgba(0,0,0,0.0196078) 0px 1px 0px;border:0;outline:0;border-radius:4px;background:white;}\", \"input::-webkit-input-placeholder{color:#aab7c4;}\", \"input::-moz-placeholder{color:#aab7c4;}\", \"input:-ms-input-placeholder{color:#aab7c4;}\", \"input::placeholder{color:#aab7c4;}\", \"input:focus,.StripeElement--focus{box-shadow:rgba(50,50,93,0.109804) 0px 4px 6px, rgba(0,0,0,0.0784314) 0px 1px 3px;-webkit-transition:all 150ms ease;-webkit-transition:all 150ms ease;transition:all 150ms ease;}\", \".StripeElement.IdealBankElement,.StripeElement.PaymentRequestButton{padding:0;}\"]));\n}\n\nexport default AddResForm;","map":null,"metadata":{},"sourceType":"module"}